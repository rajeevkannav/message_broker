<%= form_for(@rule, remote: true) do |f| %>
    <div id="error_explanation"></div>

    Do <%= f.select :activity_id, MessageBroker::Activity.all.collect { |activity| [activity.name, activity.id] },
                    {include_blank: false} %>
    On <%= f.select :target, model_list, include_blank: true %>
    before <%= f.select :event, [] %>
    on the lapse of 2 minutes.
    <%= f.submit 'Add Rule' %>
<% end %>
<script>

    $(document).ready(function () {
        return $("#rule_target").on("change", function () {
            return $.ajax({
                url: "<%= dashboard_resource_events_url %>",
                type: "GET",
                dataType: "script",
                data: {
                    ar_classname: $('#rule_target option:selected').val()
                }
            });
        });
    });
</script>